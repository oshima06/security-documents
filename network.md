# Network Command

## ss

ネットワーク通信で利用する「ソケット」についての情報などを出力するコマンド。
※従来はnetstatコマンドが使用されていた

[LINK](https://atmarkit.itmedia.co.jp/ait/articles/1710/06/news014.html)

### Options

- -f (ソケット) --family (ソケット) : 表示するソケットの種類（ファミリー）をunix、inet、inet6、link、netlinkから指定する
- -x --unix : UNIXドメインソケットを表示（-f unix相当）
- -4 --ipv4 : IPv4のソケットだけを表示（-f inet相当）
- -6 --ipv6 : IPv6のソケットだけを表示（-f inet6相当）
- -0 --packet : パケットソケットを表示（-f link相当）
- -t --tcp : TCPソケットを表示
- -u --udp : UDPソケットを表示
- -d --dccp : DCCPソケットを表示
- -w --raw : RAWソケットを表示
- -a --all : 接続待ち状態（LISTEN）のソケットと接続待ち状態にないソケットの両方を表示する
- -l --listening : 接続待ち状態のソケットだけを表示する


- -n --numeric : サービス名の名前解決を行わない（ポート番号を表示）
- -r --resolve : 名前解決を行う
- -e --extended : 詳細情報を表示
- -o --options : タイマー情報も表示する
- -m --memory : 各ソケットのメモリの使用量も表示する
- -p --processes : ソケットを使用しているプロセスも表示する
- -Z --context : -pオプションに加えてセキュリティコンテキストも表示（SELinux）
- -z --contexts : -Zオプションに加えてソケットコンテキストも表示（SELinux）
- -i --info : 内部TCPの情報も表示する
- -s --summary : ソケットの種類ごとに本数を表示する
- -D (ファイル名) --diag=ファイル名 : RAW情報をファイルに出力する（画面には何も出力しない）

### Examples

#### TCPの接続待ち状態と接続待ち状態にないソケットを表示する.

```bash
$ ss -nalt
```

- -n(--numeric) : サービス名の名前解決を行わない（ポート番号を表示）
- -a(--all) : 接続待ち状態（LISTEN）のソケットと接続待ち状態にないソケットの両方を表示する
- -l(--listening) : 接続待ち状態のソケットだけを表示する
- -t(--tcp) : TCPソケットを表示

#### TCPとUDPの接続状態をプロセス付きで表示

```bash
$ ss -npltu
```

- -p --processes : ソケットを使用しているプロセスも表示する
- -u --udp : UDPソケットを表示

## netdiscover

LAN内で利用されているIPアドレスを常時監視して一覧を出力し続ける

```bash
# How to Install netdiscover
$ sudo apt update
$ sudo apt install -y netdiscover
```

- シンプルなARP Scanner
- アクティブとパッシブの両方のモードで動作できる
- 識別されたホストをライブで表示
- 複数のサブネットをスキャンすることが可能
- タイミングオプション

### Usage

事前に以下のコマンドでサブネットマスクなどを把握する

```bash
$ ip addr
$ ip route
```

```bash
$ netdiscover -r {ネットワークアドレス/サブネット}

$ netdiscover -r 192.168.0.0/24
```

問題点としてサブネットマスクは、以下の3つの範囲でないとエラーが表示される

- 0.0.0.0/8
- 0.0.0.0/16
- 0.0.0.0/24

### Option

- -i : 使用するネットワークデバイス
- -r : 自動スキャンではなく、指定した範囲をスキャンする
- -l : 与えられたファイルに含まれる範囲のリストをスキャン
- -p : パッシブモード - 何も送信せず、スニッフィングのみを行う
- -m : 既知のMACとホスト名のリストをスキャン
- -F : pcapのフィルター表現をカスタマイズ (デフォルト:arp)
- -s : 各ARPリクエストの間にスリープする時間
- -c : 各ARPリクエストの送信回数
- -n : スキャンに使われた最後のソースIPオクテット（2～253まで)
- -d : オートスキャンと高速モード用のホーム設定ファイルを無視
- -f : ファストモードスキャンを有効にすると、時間を大幅に節約
- -P : 他のプログラムでの解析に適したフォーマットで結果を表示し、アクティブスキャン後に停止
- -L : `-P`に似ていますが、アクティブなスキャンが完了した後もリスニングを続ける
- -N : ヘッダーを印刷しない。Pまたは-Lが有効な場合のみ有効
- -S : 各リクエスト間のスリープ時間抑制を有効

## arp-scan

LAN内で利用されているIPアドレスを調べる

```bash
$ sudo arp-scan -I スキャンを行うネットワークアダプタ(eth0など) -l
```
